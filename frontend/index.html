<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <script src="fetch-and-post.js"></script>
  </head>
  <body>
    <h1>Lucentia</h1>
    <div id="account">
      <div id="username-field"></div>
      <a href="login.html">Anmelden</a>
      <a href="" onclick="logoff()">Abmelden</a>
    </div>

    <main>
      <div id="chats-list"></div>

      <div id="message-and-input-wrapper">
        <div id="messages-list"></div>

        <form id="messageForm">
          <input type="text" name="message" placeholder="message" />
          <button type="submit">send</button>
        </form>
      </div>
    </main>

    <script>
      window.onload = async function () {
        const username = await loadUsername();
        document.getElementById("username-field").textContent =
          "Angemeldet als: " + username;
        loadMessages();
        getAllChats();
      };

      setInterval(loadMessages, 5000); // Update messages every 5 seconds
    </script>
  </body>
</html>
